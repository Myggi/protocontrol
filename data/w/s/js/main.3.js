(this.webpackJsonpprotocontrol=this.webpackJsonpprotocontrol||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},21:function(e,t,a){},22:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=(a(21),a(2)),i=a(3),s=a(5),u=a(4),f=(a(22),a(15)),h=a.n(f);function d(e){return r.a.createElement("div",{className:"RowContainer"},e.children)}function m(e){return r.a.createElement("div",{className:"ledcontainer",onClick:e.onClick},r.a.createElement("div",{className:1===e.on?"LedOn":"LedOff"}))}var p=function(e){for(var t=[],a=function(a){for(var n=[],c=function(t){n.push(r.a.createElement(m,{on:e.matrix.get(a,t),onClick:function(){e.matrix.toggle(a,t),e.update(e.matrix)},key:t}))},o=0;o<e.matrix.cols;o++)c(o);t.push(r.a.createElement(d,{key:a}," ",n," "))},n=0;n<e.matrix.rows;n++)a(n);return r.a.createElement(h.a,{grid:[25,25],handle:".MatrixTitleBar"},r.a.createElement("div",{className:"MatrixWrapper"},r.a.createElement("div",{className:"MatrixTitleBar"},r.a.createElement("div",{className:"MatrixLabel"}," ",e.name," "),r.a.createElement("div",{className:"MatrixCloseButton",onClick:function(){e.matrix.clear(),e.update(e.matrix)}}," x ")),r.a.createElement("div",{className:"MatrixContainer ".concat(e.name)},t)))};function v(e){return r.a.createElement("div",{className:"KaiborgRow KaiborgRow_".concat(e.type)},e.children)}var b=function(e){var t=function(t){var a=e.face[t];return r.a.createElement(p,{name:t,matrix:a,update:function(a){var n=e.face;n[t]=a,e.updateface(n)},key:t})};return r.a.createElement("div",{className:"KaiborgFace"},r.a.createElement(v,{type:"eye"},t("eye_r"),t("eye_l")),r.a.createElement(v,{type:"nose"},t("nose_r"),t("nose_l")),r.a.createElement(v,{type:"mouth"},t("mouth_r"),t("mouth_l")))};var y=function(e){return console.log(e.face),r.a.createElement("div",{className:"Editor"},r.a.createElement(b,{updateface:e.updateface,face:e.face}))},w=function(){function e(t,a){var n=this;Object(l.a)(this,e),this.clear=function(){console.log("clear");var e=n.rows,t=n.cols;n.data=Array(e).fill(0).map((function(e){return Array(t).fill(0)})),n.top=Array(t).fill(null),n.bot=Array(t).fill(null),n.sweepfill()},this.rows=t,this.cols=a,this.data=Array(t).fill(0).map((function(e){return Array(a).fill(0)})),this.top=Array(a).fill(null),this.bot=Array(a).fill(null)}return Object(i.a)(e,[{key:"set",value:function(e,t,a){this.data[e][t]=a}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"toggle",value:function(e,t){this.data[e][t]=0===this.data[e][t]?1:0}},{key:"sweepfill",value:function(){for(var e=0;e<this.cols;e++){for(var t=this.top[e],a=this.bot[e],n=0;n<this.rows;n++)this.set(n,e,0);if(null!==t&&null!=a)for(var r=a;r<=t;r++)this.set(r,e,1)}}},{key:"copy",value:function(){for(var t=new e(this.rows,this.cols),a=0;a<this.rows;a++)for(var n=0;n<this.cols;n++)t.data[a][n]=this.data[a][n];return t}}]),e}();function E(e){var t=e.selectedface===e.name?"sidebarelement_selected":"sidebarelement";return r.a.createElement("div",{className:t,onClick:function(){e.onClick(e.name)}},e.name)}var g=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){n.state.value.length>0&&(alert("A name was submitted: "+n.state.value),n.props.handleNewFace(n.state.value)),e.preventDefault()},n.state={value:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebarelement"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"+ New"})))}}]),a}(r.a.Component);var C=function(e){return r.a.createElement("div",{className:"Sidebar"},r.a.createElement(g,{handleNewFace:e.handleNewFace}),e.faces.map((function(t){return r.a.createElement(E,{name:t,onClick:e.handleSelectFace,key:t,selectedface:e.selectedface})})))};var k=function(e){return r.a.createElement("div",{className:"Headerbar"},r.a.createElement("div",{style:{marginRight:"auto"}},"Beeper boie super cool editor v0.001"),r.a.createElement("div",{className:"HeaderButton",onClick:e.handleDuplicateFace}," duplicate "),r.a.createElement("div",{className:"HeaderButton",onClick:e.handleSaveFace}," save "),r.a.createElement("div",{className:"HeaderButton"}," delet dis "))},N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.modal?(console.log(this.props),r.a.createElement("div",{className:"ModalContainer"},r.a.createElement("div",{className:"ModalContent"},r.a.cloneElement(this.props.modal(),{onClose:this.props.onClose})))):null}}]),a}(r.a.Component),S=a(1),F=a.n(S),O=a(6);function x(){return(x=Object(O.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/setface",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:t});case 2:return a=e.sent,console.log(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(O.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getface/".concat(t));case 2:return a=e.sent,e.next=5,a.arrayBuffer();case 5:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return A.apply(this,arguments)}function A(){return(A=Object(O.a)(F.a.mark((function e(t,a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/saveface/".concat(t),{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:a});case 2:return n=e.sent,console.log(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(O.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/listfaces");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(O.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/newface",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});case 2:return a=e.sent,console.log(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=a(10);function T(e){console.log("Assembling face data");for(var t=new Uint8Array(112),a=0,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(D.a)(r[n],2),o=c[0],l=c[1];console.log("Appending "+o);for(var i=l.data.length,s=l.data[0].length,u=0;u<i;u++)for(var f=0;f<s;f++){var h=0!==l.data[u][f]?1:0,d=a%8;t[Math.floor(a/8)]|=h<<d,a+=1}}return console.log("FACE ARRAY",t),t}function L(e,t){var a=t%8;return e[Math.floor(t/8)]>>a&1}var R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){n.state.value.length>0&&n.props.onSubmit(n.state.value),e.preventDefault(),n.props.onClose()},n.state={value:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"NameModal"},r.a.createElement("button",{onClick:this.props.onClose},"close"),"Insert name",r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"Name"})),r.a.createElement("button",{onClick:this.handleSubmit},"submit"))}}]),a}(r.a.Component),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleUpdateFace=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.setState({face:e,unsaved:t}),n.handleSetFace()},n.handleSelectFace=function(e){(function(e){return j.apply(this,arguments)})(e).then((function(e){var t=function(e){var t={eye_r:new w(8,16),eye_l:new w(8,16),nose_r:new w(8,8),nose_l:new w(8,8),mouth_r:new w(8,32),mouth_l:new w(8,32)};function a(a,n,r,c,o){for(var l=t[a],i=0;i<c;i++)for(var s=0;s<r;s++){var u=L(e,n+i+s*o);l.set(s,i,u)}}return a("eye_r",0,8,16,16),a("eye_l",128,8,16,16),a("nose_r",256,8,8,8),a("nose_l",320,8,8,8),a("mouth_r",384,8,32,32),a("mouth_l",640,8,32,32),t}(e);n.handleUpdateFace(t,!1)})),n.setState({selectedface:e})},n.handleSetFace=function(){!function(e){x.apply(this,arguments)}(T(n.state.face))},n.handleSaveFace=function(){_(n.state.selectedface,T(n.state.face))},n.handleDeleteFace=function(){},n.handleNewFace=function(e){(function(e){return B.apply(this,arguments)})(e).then((function(){n.handleListFaces()})).then((function(){n.handleSelectFace(e)}))},n.handleListFaces=function(){(function(){return M.apply(this,arguments)})().then((function(e){n.setState({facenames:e})}))},n.handleDuplicateFace=function(){n.setState({modal:function(){return r.a.createElement(R,{onSubmit:function(e){return _(e,T(n.state.face))}})}}),n.handleListFaces()},n.state={face:{eye_r:new w(8,16),eye_l:new w(8,16),nose_r:new w(8,8),nose_l:new w(8,8),mouth_r:new w(8,32),mouth_l:new w(8,32)},facenames:["default"],selectedface:"default",unsaved:!1,modal:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleListFaces()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(N,{modal:this.state.modal,onClose:function(){return e.setState({modal:!1})}}),r.a.createElement(k,{handleSaveFace:this.handleSaveFace,handleDuplicateFace:this.handleDuplicateFace}),r.a.createElement("div",{className:"Main"},r.a.createElement(C,{faces:this.state.facenames,unsaved:this.state.unsaved,selectedface:this.state.selectedface,handleSelectFace:this.handleSelectFace,handleNewFace:this.handleNewFace}),r.a.createElement(y,{face:this.state.face,updateface:this.handleUpdateFace})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.3.js.map